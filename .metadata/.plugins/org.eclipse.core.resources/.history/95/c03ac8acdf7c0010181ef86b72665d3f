package pack1;

import org.testng.annotations.Test;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.ie.InternetExplorerDriver;
import org.openqa.selenium.support.ui.Select;
import org.testng.Assert;
import org.testng.annotations.AfterMethod;
import org.testng.annotations.BeforeMethod;
import org.testng.annotations.Parameters;
import org.testng.annotations.Test;

import io.github.bonigarcia.wdm.WebDriverManager;

public class Lab9 {
	 WebDriver driver;
  @Test
  
          @BeforeMethod
	      @Parameters("browser")  // You can pass "chrome" or "ie" from testng.xml
	      public void setUp(String browser) {
	          if (browser.equalsIgnoreCase("chrome")) {
	              WebDriverManager.chromedriver().setup();
	              driver = new ChromeDriver();
	          } else if (browser.equalsIgnoreCase("ie")) {
	              WebDriverManager.iedriver().setup();
	              driver = new InternetExplorerDriver();
	          }
	          driver.manage().window().maximize();
	      }

	      @Test
	      public void testLab3AndLab4Flow() throws InterruptedException {
	          // Step 1: Open URL
	          driver.get("https://tutorialsninja.com/demo/index.php");

	          // Step 2: Verify title
	          String title = driver.getTitle();
	          Assert.assertTrue(title.contains("Your Store"), "Title should contain 'Your Store'");

	          // Step 3: Go to Desktops â†’ Mac
	          driver.findElement(By.linkText("Desktops")).click();
	          driver.findElement(By.linkText("Mac (1)")).click();

	          // Step 4: Select Name (A-Z)
	          Select sortDropdown = new Select(driver.findElement(By.id("input-sort")));
	          sortDropdown.selectByVisibleText("Name (A - Z)");

	          // Step 5: Click Add to Cart
	          driver.findElement(By.xpath("//button[@data-original-title='Add to Cart']")).click();
	          Thread.sleep(2000);

	          // Verify cart updated
	          String cartText = driver.findElement(By.id("cart-total")).getText();
	          Assert.assertTrue(cartText.contains("1 item(s)"), "Cart should have 1 item");

	          // Step 6: Search for 'Mobile'
	          WebElement searchBox = driver.findElement(By.name("search"));
	          searchBox.clear();
	          searchBox.sendKeys("Mobile");
	          driver.findElement(By.cssSelector("button.btn.btn-default.btn-lg")).click();

	          String searchHeading = driver.findElement(By.cssSelector("h2")).getText();
	          Assert.assertEquals(searchHeading, "Products meeting the search criteria");

	          // Step 7: Search for 'Monitor'
	          searchBox = driver.findElement(By.name("search"));
	          searchBox.clear();
	          searchBox.sendKeys("Monitor");
	          driver.findElement(By.cssSelector("button.btn.btn-default.btn-lg")).click();

	          String searchHeading2 = driver.findElement(By.cssSelector("h2")).getText();
	          Assert.assertEquals(searchHeading2, "Products meeting the search criteria");
	      }

	      @AfterMethod
	      public void tearDown() {
	          if (driver != null) {
	              driver.quit();
	          }
	      }
	  }

  

